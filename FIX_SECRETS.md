# Исправление проблемы с секретами в коммите

## Проблема

GitHub заблокировал push, потому что в коммите обнаружены секреты (Personal Access Token) в файлах:
- `create_pr.ps1`
- `get_prs.ps1`
- `github_full_workflow.ps1`

## Решение

### Вариант 1: Разрешить секрет через ссылку GitHub (Быстро)

GitHub предоставил ссылку для разрешения секрета:
https://github.com/marchelxyz/mariko_vld/security/secret-scanning/unblock-secret/37zJSRSJjraON0XMxfKa1inTVwQ

1. Перейдите по ссылке
2. Разрешите push с этим секретом
3. Выполните `git push` снова

**⚠️ ВАЖНО:** После этого **обязательно** удалите токен из файлов и создайте новый коммит!

### Вариант 2: Исправить файлы и создать новый коммит (Рекомендуется)

1. Токены уже удалены из файлов
2. Создайте новый коммит с исправлениями:

```bash
git add create_pr.ps1 get_prs.ps1 github_full_workflow.ps1
git commit -m "fix: удалены захардкоженные токены из скриптов

- Токены теперь берутся из переменной окружения GH_TOKEN
- Использование GitHub CLI (gh) рекомендуется"
```

3. Попробуйте push снова:

```bash
git push origin feat/cart-item-quantity-limit
```

### Вариант 3: Удалить секрет из истории (Если нужно)

Если нужно полностью удалить секрет из истории:

```bash
# Удалить файлы из последнего коммита
git reset --soft HEAD~1
git reset HEAD create_pr.ps1 get_prs.ps1 github_full_workflow.ps1

# Исправить файлы (уже исправлены)
git add create_pr.ps1 get_prs.ps1 github_full_workflow.ps1

# Создать новый коммит без секретов
git commit -m "feat: добавлено ограничение максимального количества одинаковых блюд в корзине

- Добавлено поле max_cart_item_quantity в таблицу restaurants (по умолчанию 10)
- Добавлена миграция БД для нового поля
- Обновлены API для создания/обновления ресторанов
- Добавлена настройка maxCartItemQuantity в админ панели
- Реализована проверка лимита при добавлении блюд в корзину
- Добавлены уведомления при достижении лимита
- Добавлена поддержка maxCartItemQuantity в MenuItemComponent
- Кнопка + становится неактивной при достижении максимального количества
- Исправлены скрипты: удалены захардкоженные токены"

# Отправить изменения
git push origin feat/cart-item-quantity-limit
```

## Рекомендация

**Используйте Вариант 2** - это самое безопасное решение. Токены уже удалены из файлов, просто создайте новый коммит.

## После исправления

После успешного push создайте PR:

```bash
gh pr create --base main --head feat/cart-item-quantity-limit --title "feat: ограничение максимального количества одинаковых блюд в корзине" --body-file PR_DESCRIPTION.md --web
```

# Руководство по автоматическому созданию Pull Request

## Обзор

Система автоматического создания PR позволяет быстро создавать Pull Request'ы после завершения задач, аналогично веб-версии Cursor.

## Быстрый старт

### После завершения задачи

1. **Проверьте изменения:**
   ```bash
   git status
   ```

2. **Создайте PR автоматически:**
   ```bash
   ./auto_create_pr.sh
   ```

Скрипт автоматически:
- ✅ Проверит наличие незакоммиченных изменений
- ✅ Добавит и закоммитит изменения (если есть)
- ✅ Создаст/переключится на нужную ветку
- ✅ Отправит изменения на GitHub
- ✅ Создаст Pull Request
- ✅ Откроет PR в браузере

## Использование

### Базовое использование

```bash
# Использовать значения по умолчанию
./auto_create_pr.sh
```

### С указанием ветки

```bash
./auto_create_pr.sh feat/my-feature
```

### С указанием ветки и названия

```bash
./auto_create_pr.sh feat/my-feature "feat: моя новая функция"
```

## Параметры

### auto_create_pr.sh

```bash
./auto_create_pr.sh [branch_name] [title]
```

- `branch_name` - имя ветки (по умолчанию: `feat/cart-item-quantity-limit`)
- `title` - название PR (по умолчанию: `feat: ограничение максимального количества одинаковых блюд в корзине`)

### auto_create_pr.ps1

```powershell
.\auto_create_pr.ps1 [-BranchName "branch"] [-Title "title"] [-BaseBranch "main"]
```

## Интеграция с Cursor

### Настройка для автоматического использования

1. **Создайте алиас в Git Bash:**

Добавьте в `~/.bashrc`:
```bash
alias pr="cd /c/Users/Роман/OneDrive/Desktop/Договора\ НПД\ Мазов/03/Проект\ Марико\ апп/Код\ для\ курсора/mariko_vld && ./auto_create_pr.sh"
```

2. **Используйте в Cursor:**

После завершения задачи просто выполните:
```bash
pr
```

Или с параметрами:
```bash
pr feat/my-feature "feat: описание"
```

## Примеры использования

### Пример 1: Простое создание PR

```bash
# Вы завершили задачу, все изменения готовы
./auto_create_pr.sh
```

### Пример 2: Создание PR для новой функции

```bash
./auto_create_pr.sh feat/user-profile "feat: добавлен профиль пользователя"
```

### Пример 3: Исправление бага

```bash
./auto_create_pr.sh fix/cart-bug "fix: исправлена ошибка в корзине"
```

## Что делает скрипт

1. **Проверяет изменения:**
   - Если есть незакоммиченные изменения, добавляет и коммитит их

2. **Управляет веткой:**
   - Переключается на указанную ветку
   - Создает ветку, если её нет

3. **Отправляет изменения:**
   - Пушит изменения на GitHub

4. **Создает PR:**
   - Использует GitHub CLI для создания PR
   - Использует `PR_DESCRIPTION.md` если есть
   - Открывает PR в браузере

## Требования

- ✅ Git установлен и настроен
- ✅ GitHub CLI (`gh`) установлен и авторизован
- ✅ Вы находитесь в директории проекта

## Проверка готовности

```bash
# Проверить Git
git --version

# Проверить GitHub CLI
gh --version

# Проверить авторизацию
gh auth status
```

## Устранение проблем

### Ошибка: "branch not found"

Убедитесь, что ветка существует или будет создана:
```bash
git branch -a
```

### Ошибка: "authentication required"

Выполните авторизацию:
```bash
gh auth login
```

### Ошибка: "no changes to commit"

Это нормально, если все изменения уже закоммичены. Скрипт продолжит работу.

## Дополнительные возможности

### Создание PR с метками

После создания PR можно добавить метки:
```bash
gh pr edit <PR_NUMBER> --add-label "enhancement"
```

### Создание PR с ревьюерами

```bash
gh pr create --base main --head feat/branch --title "Title" --reviewer username
```

### Создание PR с назначением

```bash
gh pr create --base main --head feat/branch --title "Title" --assignee username
```

## Резюме

Система автоматического создания PR упрощает процесс:
1. Завершили задачу
2. Выполнили `./auto_create_pr.sh`
3. PR создан и открыт в браузере

Больше не нужно вручную выполнять все команды git и gh!

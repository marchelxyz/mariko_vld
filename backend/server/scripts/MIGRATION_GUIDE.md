# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö: VK Cloud PostgreSQL ‚Üí Railway PostgreSQL

## üìã –û–±–∑–æ—Ä

–≠—Ç–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –æ–ø–∏—Å—ã–≤–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å –º–∏–≥—Ä–∞—Ü–∏–∏ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö –∏–∑ PostgreSQL –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –Ω–∞ VK Cloud –≤ PostgreSQL –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –Ω–∞ Railway.

## üîß –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Node.js —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- –î–æ—Å—Ç—É–ø –∫ –æ–±–µ–∏–º –±–∞–∑–∞–º –¥–∞–Ω–Ω—ã—Ö (VK Cloud –∏ Railway)
- –°—Ç—Ä–æ–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –æ–±–µ–∏–º –ë–î

## üìù –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞

### –®–∞–≥ 1: –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

#### VK Cloud PostgreSQL
1. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å VK Cloud
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª Managed PostgreSQL
3. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à –∫–ª–∞—Å—Ç–µ—Ä
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å—Ç—Ä–æ–∫—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (—Ñ–æ—Ä–º–∞—Ç: `postgresql://user:password@host:port/database`)

#### Railway PostgreSQL
1. –û—Ç–∫—Ä–æ–π—Ç–µ Railway Dashboard
2. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à –ø—Ä–æ–µ–∫—Ç ‚Üí —Å–µ—Ä–≤–∏—Å PostgreSQL
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Variables**
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `DATABASE_URL`

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

**–í–∞—Ä–∏–∞–Ω—Ç A: –ß–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –æ–¥–Ω–æ—Ä–∞–∑–æ–≤–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏)**

```bash
export VK_CLOUD_DATABASE_URL="postgresql://user:password@vk-cloud-host:6432/database"
export RAILWAY_DATABASE_URL="postgresql://user:password@railway-host:5432/database"
```

**–í–∞—Ä–∏–∞–Ω—Ç B: –ß–µ—Ä–µ–∑ .env —Ñ–∞–π–ª (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –∑–∞–ø—É—Å–∫–æ–≤)**

–°–æ–∑–¥–∞–π—Ç–µ –∏–ª–∏ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª `backend/server/.env.local`:

```bash
# –ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö (VK Cloud)
VK_CLOUD_DATABASE_URL=postgresql://user:password@vk-cloud-host:6432/database

# –¶–µ–ª–µ–≤–∞—è –ë–î (Railway)
RAILWAY_DATABASE_URL=postgresql://user:password@railway-host:5432/database
```

**‚ö†Ô∏è –í–∞–∂–Ω–æ:**
- –ù–µ –∫–æ–º–º–∏—Ç—å—Ç–µ —Ñ–∞–π–ª `.env.local` –≤ Git (–æ–Ω –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ `.gitignore`)
- –ï—Å–ª–∏ –≤ –ø–∞—Ä–æ–ª–µ –µ—Å—Ç—å —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã (@, :, /, #), –∑–∞–∫–æ–¥–∏—Ä—É–π—Ç–µ –∏—Ö –≤ URL-—Ñ–æ—Ä–º–∞—Ç–µ:
  - `@` ‚Üí `%40`
  - `:` ‚Üí `%3A`
  - `/` ‚Üí `%2F`
  - `#` ‚Üí `%23`

### –®–∞–≥ 3: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ü–µ–ª–µ–≤–æ–π –ë–î –Ω–∞ Railway

–ü–µ—Ä–µ–¥ –º–∏–≥—Ä–∞—Ü–∏–µ–π –¥–∞–Ω–Ω—ã—Ö —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —Å–æ–∑–¥–∞–Ω–∞ –Ω–∞ Railway:

```bash
cd backend/server
node databaseInit.mjs
```

–≠—Ç–æ —Å–æ–∑–¥–∞—Å—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ç–∞–±–ª–∏—Ü—ã, –∏–Ω–¥–µ–∫—Å—ã –∏ foreign keys.

## üöÄ –ó–∞–ø—É—Å–∫ –º–∏–≥—Ä–∞—Ü–∏–∏

### –õ–æ–∫–∞–ª—å–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è

```bash
cd backend/server/scripts

# –ï—Å–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ export
node migrateVkCloudToRailway.mjs

# –ò–ª–∏ –µ—Å–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ .env.local
node migrateVkCloudToRailway.mjs
```

### –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç

1. ‚úÖ –ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ –æ–±–µ–∏–º –±–∞–∑–∞–º –¥–∞–Ω–Ω—ã—Ö
2. ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü
3. ‚úÖ –ú–∏–≥—Ä–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ (—Å —É—á–µ—Ç–æ–º foreign keys)
4. ‚úÖ –ú–∏–≥—Ä–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ—Ä—Ü–∏—è–º–∏ (–ø–æ 1000 –∑–∞–ø–∏—Å–µ–π –∑–∞ —Ä–∞–∑)
5. ‚úÖ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç—ã (–ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—â–∏–µ –∑–∞–ø–∏—Å–∏)
6. ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏
7. ‚úÖ –í—ã–≤–æ–¥–∏—Ç –ø–æ–¥—Ä–æ–±–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É

### –ü–æ—Ä—è–¥–æ–∫ –º–∏–≥—Ä–∞—Ü–∏–∏ —Ç–∞–±–ª–∏—Ü

–°–∫—Ä–∏–ø—Ç –º–∏–≥—Ä–∏—Ä—É–µ—Ç —Ç–∞–±–ª–∏—Ü—ã –≤ —Å–ª–µ–¥—É—é—â–µ–º –ø–æ—Ä—è–¥–∫–µ (—Å —É—á–µ—Ç–æ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π):

1. `cities` - –≥–æ—Ä–æ–¥–∞
2. `user_profiles` - –ø—Ä–æ—Ñ–∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
3. `admin_users` - –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã
4. `restaurant_payments` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–ª–∞—Ç–µ–∂–µ–π —Ä–µ—Å—Ç–æ—Ä–∞–Ω–æ–≤
5. `restaurants` - —Ä–µ—Å—Ç–æ—Ä–∞–Ω—ã (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç cities)
6. `user_addresses` - –∞–¥—Ä–µ—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç user_profiles)
7. `user_carts` - –∫–æ—Ä–∑–∏–Ω—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç user_profiles)
8. `menu_categories` - –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –º–µ–Ω—é (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç restaurants)
9. `menu_items` - –±–ª—é–¥–∞ –º–µ–Ω—é (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç menu_categories)
10. `city_recommended_dishes` - —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –±–ª—é–¥–∞ (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç cities –∏ menu_items)
11. `promotions` - –∞–∫—Ü–∏–∏ (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç cities)
12. `cart_orders` - –∑–∞–∫–∞–∑—ã
13. `payments` - –ø–ª–∞—Ç–µ–∂–∏ (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç cart_orders)
14. `bookings` - –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç restaurants)

## üìä –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞

```
üîÑ –ù–∞—á–∏–Ω–∞–µ–º –º–∏–≥—Ä–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö –∏–∑ VK Cloud –≤ Railway PostgreSQL

üì° –ü–æ–¥–∫–ª—é—á–∞–µ–º—Å—è –∫ –±–∞–∑–∞–º –¥–∞–Ω–Ω—ã—Ö...
‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ VK Cloud —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ
‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Railway —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ

üìã –ù–∞–π–¥–µ–Ω–æ —Ç–∞–±–ª–∏—Ü –≤ –∏—Å—Ç–æ—á–Ω–∏–∫–µ: 14
üìã –ù–∞–π–¥–µ–Ω–æ —Ç–∞–±–ª–∏—Ü –≤ —Ü–µ–ª–∏: 14

üì¶ –¢–∞–±–ª–∏—Ü –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏: 14
   cities, user_profiles, admin_users, restaurant_payments, restaurants, user_addresses, user_carts, menu_categories, menu_items, city_recommended_dishes, promotions, cart_orders, payments, bookings

üì¶ –ú–∏–≥—Ä–∞—Ü–∏—è —Ç–∞–±–ª–∏—Ü—ã: cities
   üìä –í—Å–µ–≥–æ –∑–∞–ø–∏—Å–µ–π –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏: 5
   ‚è≥ –ü—Ä–æ–≥—Ä–µ—Å—Å: 5/5 (100.0%)
   ‚úÖ –ú–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ: 5, –ø—Ä–æ–ø—É—â–µ–Ω–æ (–¥—É–±–ª–∏–∫–∞—Ç—ã): 0

üì¶ –ú–∏–≥—Ä–∞—Ü–∏—è —Ç–∞–±–ª–∏—Ü—ã: user_profiles
   üìä –í—Å–µ–≥–æ –∑–∞–ø–∏—Å–µ–π –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏: 1234
   ‚è≥ –ü—Ä–æ–≥—Ä–µ—Å—Å: 1234/1234 (100.0%)
   ‚úÖ –ú–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ: 1234, –ø—Ä–æ–ø—É—â–µ–Ω–æ (–¥—É–±–ª–∏–∫–∞—Ç—ã): 0

...

üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö:

   ‚úÖ cities: 5 = 5 ‚úì
   ‚úÖ user_profiles: 1234 = 1234 ‚úì
   ...

üìä –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–∏:

   ‚úÖ cities: –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ 5, –ø—Ä–æ–ø—É—â–µ–Ω–æ 0
   ‚úÖ user_profiles: –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ 1234, –ø—Ä–æ–ø—É—â–µ–Ω–æ 0
   ...

   –í—Å–µ–≥–æ –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ –∑–∞–ø–∏—Å–µ–π: 15234
   –í—Å–µ–≥–æ –ø—Ä–æ–ø—É—â–µ–Ω–æ (–¥—É–±–ª–∏–∫–∞—Ç—ã): 0

‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ! –í—Å–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã.

üîå –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ VK Cloud –∑–∞–∫—Ä—ã—Ç–æ
üîå –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Railway –∑–∞–∫—Ä—ã—Ç–æ
```

## üîÑ –ü–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏

### –®–∞–≥ 1: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞ Railway

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏ –æ–±–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `DATABASE_URL` –Ω–∞ Railway:

```bash
# –ß–µ—Ä–µ–∑ Railway CLI
railway variables set DATABASE_URL="$RAILWAY_DATABASE_URL" --service backend

# –ï—Å–ª–∏ bot —Å–µ—Ä–≤–∏—Å —Ç–æ–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ë–î
railway variables set DATABASE_URL="$RAILWAY_DATABASE_URL" --service bot
```

**‚ö†Ô∏è –í–∞–∂–Ω–æ:** Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `DATABASE_URL` –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ PostgreSQL —Å–µ—Ä–≤–∏—Å–∞. –ü—Ä–æ—Å—Ç–æ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –æ–Ω–∞ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –ë–î (Railway PostgreSQL, –∞ –Ω–µ VK Cloud).

### –®–∞–≥ 2: –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤

```bash
railway restart --service backend
railway restart --service bot
```

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Railway:
   ```bash
   railway logs --service backend --follow
   ```

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É API endpoints

3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏

## ‚ö†Ô∏è Troubleshooting

### –û—à–∏–±–∫–∞: "VK_CLOUD_DATABASE_URL –Ω–µ –∑–∞–¥–∞–Ω"

**–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞:
```bash
export VK_CLOUD_DATABASE_URL="postgresql://..."
# –ò–ª–∏ –¥–æ–±–∞–≤—å—Ç–µ –≤ .env.local —Ñ–∞–π–ª
```

### –û—à–∏–±–∫–∞: "Connection refused" –∏–ª–∏ "Connection timeout"

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å —Å—Ç—Ä–æ–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—É–±–ª–∏—á–Ω—ã–π –¥–æ—Å—Ç—É–ø –≤–∫–ª—é—á–µ–Ω –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö VK Cloud PostgreSQL
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ IP-–∞–¥—Ä–µ—Å –Ω–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### –û—à–∏–±–∫–∞: "SSL connection required"

**–†–µ—à–µ–Ω–∏–µ:**
- –î–ª—è VK Cloud –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ—Ä—Ç `6432` (SSL)
- –î–ª—è Railway –æ–±—ã—á–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ—Ä—Ç `5432` –∏–ª–∏ `5433`

### –û—à–∏–±–∫–∞: "Table does not exist"

**–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å—Ö–µ–º–∞ –ë–î —Å–æ–∑–¥–∞–Ω–∞ –Ω–∞ Railway:
```bash
cd backend/server
node databaseInit.mjs
```

### –ë–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π (–¥—É–±–ª–∏–∫–∞—Ç—ã)

**–†–µ—à–µ–Ω–∏–µ:** –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ, –µ—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ —É–∂–µ –±—ã–ª–∏ –≤ —Ü–µ–ª–µ–≤–æ–π –ë–î. –°–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `ON CONFLICT DO NOTHING` –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –ø–æ primary key.

### –†–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è –≤ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –∑–∞–ø–∏—Å–µ–π –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–∞–±–ª–∏—Ü—ã –≤ –æ–±–µ–∏—Ö –ë–î –∏–º–µ—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –Ω–µ—Ç –ª–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π (constraints), –∫–æ—Ç–æ—Ä—ã–µ –±–ª–æ–∫–∏—Ä—É—é—Ç –≤—Å—Ç–∞–≤–∫—É –¥–∞–Ω–Ω—ã—Ö

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚ö†Ô∏è **–ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ —Å—Ç—Ä–æ–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –≤ Git**
- ‚ö†Ô∏è –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `.env.local` –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (—Ñ–∞–π–ª –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ `.gitignore`)
- ‚ö†Ô∏è –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Railway Variables –¥–ª—è production
- ‚ö†Ô∏è –ü–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–∞—Ä–æ–ª–µ–π

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

- [Railway PostgreSQL –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://docs.railway.app/databases/postgresql)
- [VK Cloud PostgreSQL –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://mcs.mail.ru/docs/ru/additionals/databases/postgresql)
- [Node.js pg –±–∏–±–ª–∏–æ—Ç–µ–∫–∞](https://node-postgres.com/)

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –º–∏–≥—Ä–∞—Ü–∏–∏

- [ ] –ü–æ–ª—É—á–µ–Ω—ã —Å—Ç—Ä–æ–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –æ–±–µ–∏–º –ë–î
- [ ] –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã (`VK_CLOUD_DATABASE_URL`, `RAILWAY_DATABASE_URL`)
- [ ] –°—Ö–µ–º–∞ –ë–î —Å–æ–∑–¥–∞–Ω–∞ –Ω–∞ Railway (`databaseInit.mjs` –≤—ã–ø–æ–ª–Ω–µ–Ω)
- [ ] –ú–∏–≥—Ä–∞—Ü–∏—è –∑–∞–ø—É—â–µ–Ω–∞ –∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π —Å–æ–≤–ø–∞–¥–∞–µ—Ç)
- [ ] –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è `DATABASE_URL` –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –Ω–∞ Railway
- [ ] –°–µ—Ä–≤–∏—Å—ã –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω—ã
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ —Ä–∞–±–æ—Ç–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- [ ] –°—Ç–∞—Ä–∞—è –ë–î VK Cloud –º–æ–∂–µ—Ç –±—ã—Ç—å —É–¥–∞–ª–µ–Ω–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

---

**–ì–æ—Ç–æ–≤–æ!** –ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤ –≤–∞—à–∏ –¥–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç —É—Å–ø–µ—à–Ω–æ –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã –∏–∑ VK Cloud –≤ Railway PostgreSQL.

# Правило автоматического создания Pull Request

## ОБЯЗАТЕЛЬНОЕ ПРАВИЛО: Автоматически создавать PR после завершения задачи

**ВАЖНО:** После завершения любой задачи, которая включает изменения кода, Я ДОЛЖЕН автоматически создать Pull Request, выполнив команды через `run_terminal_cmd`.

## Когда создавать PR автоматически

Создавайте Pull Request автоматически после завершения задачи, если:
1. ✅ Все изменения в коде внесены
2. ✅ Код протестирован и работает (проверены линтер ошибки)
3. ✅ Нет критических ошибок
4. ✅ Пользователь явно НЕ просил не создавать PR

## Процесс автоматического создания PR

### Шаг 1: Проверка статуса

```bash
git status
```

### Шаг 2: Определение названия ветки и PR

- **Ветка:** Используйте формат `feat/описание-функции` или `fix/описание-исправления`
  - Примеры: `feat/cart-item-quantity-limit`, `fix/menu-display-issue`
- **Название PR:** Используйте формат Conventional Commits
  - `feat: описание новой функции`
  - `fix: описание исправления`
  - `refactor: описание рефакторинга`

### Шаг 3: Автоматическое выполнение команд

Я ДОЛЖЕН выполнить следующие команды через `run_terminal_cmd`:

1. **Проверить и закоммитить изменения:**
```bash
git add .
git commit -m "feat: описание изменений"
```

2. **Создать/переключиться на ветку:**
```bash
git checkout -b feat/branch-name
# или если ветка существует:
git checkout feat/branch-name
```

3. **Отправить изменения:**
```bash
git push -u origin feat/branch-name
```

4. **Создать PR:**
```bash
# Если есть PR_DESCRIPTION.md:
gh pr create --base main --head feat/branch-name --title "feat: описание" --body-file PR_DESCRIPTION.md --web

# Иначе:
gh pr create --base main --head feat/branch-name --title "feat: описание" --web
```

### Альтернатива: Использовать универсальный скрипт

Если доступен скрипт `create_pr_universal.sh` или `auto_create_pr.sh`:

```bash
./create_pr_universal.sh feat/branch-name "feat: описание"
```

## Что делать, если что-то пошло не так

- Если `git push` не работает - проверить подключение и права
- Если `gh pr create` не работает - проверить авторизацию `gh auth status`
- Если есть ошибки линтера - исправить их перед созданием PR
- Если пользователь явно просит не создавать PR - пропустить этот шаг

## Пример автоматического выполнения

После завершения задачи "Добавить функцию X":

1. Я проверяю `git status`
2. Я выполняю `git add .`
3. Я выполняю `git commit -m "feat: добавлена функция X"`
4. Я выполняю `git checkout -b feat/add-function-x`
5. Я выполняю `git push -u origin feat/add-function-x`
6. Я выполняю `gh pr create --base main --head feat/add-function-x --title "feat: добавлена функция X" --web`

**ВСЕ ЭТО Я ДЕЛАЮ АВТОМАТИЧЕСКИ, БЕЗ ЗАПРОСА ПОЛЬЗОВАТЕЛЯ.**

## Исключения

НЕ создавать PR автоматически, если:
- Пользователь явно сказал "не создавай PR" или "не делай pull request"
- Это только документация без изменений кода
- Это временные/экспериментальные изменения
- Пользователь работает в ветке main/master напрямую

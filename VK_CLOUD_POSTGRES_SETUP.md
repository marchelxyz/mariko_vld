# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—é PostgreSQL –æ—Ç VK Cloud

## üìã –û–±–∑–æ—Ä

–≠—Ç–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ–º–æ–∂–µ—Ç –≤–∞–º:
1. –ù–∞–π—Ç–∏ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö PostgreSQL –≤ VK Cloud
2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ë–î VK Cloud –≤–º–µ—Å—Ç–æ Railway PostgreSQL

---

## –®–∞–≥ 1: –ì–¥–µ –Ω–∞–π—Ç–∏ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –≤ VK Cloud

### 1.1. –í—Ö–æ–¥ –≤ –∫–æ–Ω—Å–æ–ª—å VK Cloud

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ [https://mcs.mail.ru/](https://mcs.mail.ru/) –∏–ª–∏ [https://cloud.vk.com/](https://cloud.vk.com/)
2. –í–æ–π–¥–∏—Ç–µ —á–µ—Ä–µ–∑ VK ID –∏–ª–∏ Mail.ru –∞–∫–∫–∞—É–Ω—Ç
3. –í—ã–±–µ—Ä–∏—Ç–µ –Ω—É–∂–Ω—ã–π –ø—Ä–æ–µ–∫—Ç (–µ—Å–ª–∏ —É –≤–∞—Å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ–µ–∫—Ç–æ–≤)

### 1.2. –ü–æ–∏—Å–∫ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö PostgreSQL

1. –í –ª–µ–≤–æ–º –º–µ–Ω—é –Ω–∞–π–¥–∏—Ç–µ —Ä–∞–∑–¥–µ–ª **"–ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö"** –∏–ª–∏ **"Databases"**
2. –ò–ª–∏ –Ω–∞–π–¥–∏—Ç–µ **"Managed Databases"** ‚Üí **"PostgreSQL"**
3. –û—Ç–∫—Ä–æ–π—Ç–µ —Å–ø–∏—Å–æ–∫ –≤–∞—à–∏—Ö –∫–ª–∞—Å—Ç–µ—Ä–æ–≤ PostgreSQL

### 1.3. –ü–æ—á–µ–º—É —Å–æ–∑–¥–∞–ª–æ—Å—å 2 –ë–î: Master –∏ Replica

–ï—Å–ª–∏ –≤—ã –≤–∏–¥–∏—Ç–µ –¥–≤–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö ‚Äî **Master** –∏ **Replica**, —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ! –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞ –±—ã–ª–∞ –≤–∫–ª—é—á–µ–Ω–∞ –æ–ø—Ü–∏—è **–≤—ã—Å–æ–∫–æ–π –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ (High Availability)** –∏–ª–∏ **—Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏**.

**–ß—Ç–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç:**
- **Master (Primary)** ‚Äî –æ—Å–Ω–æ–≤–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö, –Ω–∞ –∫–æ—Ç–æ—Ä—É—é –ø–∏—à—É—Ç—Å—è –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (INSERT, UPDATE, DELETE)
- **Replica (Standby)** ‚Äî —Ä–µ–ø–ª–∏–∫–∞ (–∫–æ–ø–∏—è) Master, –∫–æ—Ç–æ—Ä–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è —Å –æ—Å–Ω–æ–≤–Ω–æ–π –ë–î –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è —á—Ç–µ–Ω–∏—è (SELECT)

**–ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ:**
- ‚úÖ **–û—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å**: –µ—Å–ª–∏ Master —É–ø–∞–¥–µ—Ç, Replica –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å—Ç–∞–Ω–µ—Ç Master
- ‚úÖ **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –º–æ–∂–Ω–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç—å –Ω–∞–≥—Ä—É–∑–∫—É —á—Ç–µ–Ω–∏—è –º–µ–∂–¥—É Master –∏ Replica
- ‚úÖ **–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ**: –¥–∞–Ω–Ω—ã–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥—É–±–ª–∏—Ä—É—é—Ç—Å—è

**–ß—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:**
- üü¢ **–î–ª—è –∑–∞–ø–∏—Å–∏ –∏ —á—Ç–µ–Ω–∏—è (–æ–±—ã—á–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ)**: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ **Master**
- üü° **–¢–æ–ª—å–∫–æ –¥–ª—è —á—Ç–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)**: –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **Replica** –¥–ª—è —Å–Ω–∏–∂–µ–Ω–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ Master

**–í–∞–∂–Ω–æ:** –í –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å–ª—É—á–∞–µ–≤ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ **Master** –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è. Replica –Ω—É–∂–Ω–∞ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç—å –Ω–∞–≥—Ä—É–∑–∫—É —á—Ç–µ–Ω–∏—è.

### 1.4. –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

–û—Ç–∫—Ä–æ–π—Ç–µ –Ω—É–∂–Ω—ã–π –∫–ª–∞—Å—Ç–µ—Ä PostgreSQL. –î–∞–Ω–Ω—ã–µ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ —Å–ª–µ–¥—É—é—â–∏—Ö —Ä–∞–∑–¥–µ–ª–∞—Ö:

#### –í–∞—Ä–∏–∞–Ω—Ç 1: –í–∫–ª–∞–¥–∫–∞ "–û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è" ‚Üí "Postgres primary connection string"

1. –í –∫–∞—Ä—Ç–æ—á–∫–µ –∫–ª–∞—Å—Ç–µ—Ä–∞ –æ—Ç–∫—Ä–æ–π—Ç–µ –≤–∫–ª–∞–¥–∫—É **"–û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è"** –∏–ª–∏ **"Overview"**
2. –ù–∞–π–¥–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä **"Postgres primary connection string"** –∏–ª–∏ **"–°—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è PostgreSQL"**
3. –í —ç—Ç–æ–º –ø–æ–ª–µ —É–∫–∞–∑–∞–Ω –∞–¥—Ä–µ—Å –≤ —Ñ–æ—Ä–º–∞—Ç–µ: `<IP>:<PORT>`, –Ω–∞–ø—Ä–∏–º–µ—Ä: `10.0.1.2:5432`
   - ‚ö†Ô∏è **–í–∞–∂–Ω–æ:** –ï—Å–ª–∏ —É–∫–∞–∑–∞–Ω IP –≤–∏–¥–∞ `10.0.0.129` (–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π IP), –Ω—É–∂–Ω–æ –≤–∫–ª—é—á–∏—Ç—å **"–ù–∞–∑–Ω–∞—á–∏—Ç—å –≤–Ω–µ—à–Ω–∏–π IP"**
   - –ü–æ—Å–ª–µ –≤–∫–ª—é—á–µ–Ω–∏—è –≤–Ω–µ—à–Ω–µ–≥–æ IP –ø–æ—è–≤–∏—Ç—Å—è –ø—É–±–ª–∏—á–Ω—ã–π IP-–∞–¥—Ä–µ—Å (–Ω–µ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `10.0.`)

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–æ—Å—Ç—É–ø–∞:**
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –∏–Ω—Å—Ç–∞–Ω—Å–∞ –≤–∫–ª—é—á–µ–Ω–∞ –æ–ø—Ü–∏—è **"–ù–∞–∑–Ω–∞—á–∏—Ç—å –≤–Ω–µ—à–Ω–∏–π IP"** –∏–ª–∏ **"Assign external IP"**
   - –ï—Å–ª–∏ –æ–Ω–∞ –æ—Ç–∫–ª—é—á–µ–Ω–∞, –ø—É–±–ª–∏—á–Ω—ã–π –¥–æ—Å—Ç—É–ø –Ω–µ–≤–æ–∑–º–æ–∂–µ–Ω
   - –í–∫–ª—é—á–∏—Ç–µ –µ—ë –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –∫–ª–∞—Å—Ç–µ—Ä–∞ ‚Üí "–î–æ—Å—Ç—É–ø" –∏–ª–∏ "Access"

5. **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –≤–∞–º –ø–æ–Ω–∞–¥–æ–±—è—Ç—Å—è:**
   - **–ò–º—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (Database)**: –Ω–∞–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫–µ "–ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö"
   - **–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (Username)**: –Ω–∞–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫–µ "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏"
   - **–ü–∞—Ä–æ–ª—å (Password)**: –ø–∞—Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–µ—Å–ª–∏ –∑–∞–±—ã–ª–∏, –º–æ–∂–Ω–æ —Å–±—Ä–æ—Å–∏—Ç—å)

#### –í–∞—Ä–∏–∞–Ω—Ç 2: –í–∫–ª–∞–¥–∫–∞ "–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ" –∏–ª–∏ "Connection"

1. –í –∫–∞—Ä—Ç–æ—á–∫–µ –∫–ª–∞—Å—Ç–µ—Ä–∞ –Ω–∞–π–¥–∏—Ç–µ –≤–∫–ª–∞–¥–∫—É **"–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ"** –∏–ª–∏ **"Connection"**
   - ‚ö†Ô∏è –≠—Ç–æ –ù–ï —Å—Ç—Ä–∞–Ω–∏—Ü–∞ "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏" (`/users`) –∏–ª–∏ "–ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö" (`/databases`)
   - –≠—Ç–æ –æ—Ç–¥–µ–ª—å–Ω–∞—è –≤–∫–ª–∞–¥–∫–∞ –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∫–ª–∞—Å—Ç–µ—Ä–∞

2. –ó–¥–µ—Å—å –≤—ã —É–≤–∏–¥–∏—Ç–µ –¥–≤–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:
   - **Master (Primary)** ‚Äî –¥–ª—è –∑–∞–ø–∏—Å–∏ –∏ —á—Ç–µ–Ω–∏—è (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–æ—Ç!)
   - **Replica (Read-only)** ‚Äî —Ç–æ–ª—å–∫–æ –¥–ª—è —á—Ç–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

3. –î–ª—è –∫–∞–∂–¥–æ–≥–æ –≤–∞—Ä–∏–∞–Ω—Ç–∞ —É–∫–∞–∑–∞–Ω—ã:
   - **–ü—É–±–ª–∏—á–Ω—ã–π —Ö–æ—Å—Ç (Public Host/FQDN)**: –Ω–∞–ø—Ä–∏–º–µ—Ä, `c-xxxxx.rw.mdb.cloud.vk.com` (Master)
   - **–ü—É–±–ª–∏—á–Ω—ã–π IP**: –µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω –≤–Ω–µ—à–Ω–∏–π IP
   - **–ü–æ—Ä—Ç (Port)**: –æ–±—ã—á–Ω–æ `5432` –¥–ª—è –æ–±—ã—á–Ω–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∏–ª–∏ `6432` –¥–ª—è SSL
   - **–ò–º—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (Database)**: –∏–º—è –ë–î, –∫–æ—Ç–æ—Ä—É—é –≤—ã —Å–æ–∑–¥–∞–ª–∏
   - **–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (Username)**: –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ë–î
   - **–ü–∞—Ä–æ–ª—å (Password)**: –ø–∞—Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–º–æ–∂–µ—Ç –±—ã—Ç—å —Å–∫—Ä—ã—Ç, –Ω–∞–∂–º–∏—Ç–µ "–ü–æ–∫–∞–∑–∞—Ç—å")

**‚ö†Ô∏è –í–ê–ñ–ù–û:** 
- –ï—Å–ª–∏ –≤—ã –≤–∏–¥–∏—Ç–µ —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π IP (`10.0.0.129`) –≤ —Ä–∞–∑–¥–µ–ª–µ "–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–Ω—Å—Ç–∞–Ω—Å–∞", –≤–∫–ª—é—á–∏—Ç–µ **"–ù–∞–∑–Ω–∞—á–∏—Ç—å –≤–Ω–µ—à–Ω–∏–π IP"** –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö
- –ü–æ—Å–ª–µ –≤–∫–ª—é—á–µ–Ω–∏—è –ø–æ—è–≤–∏—Ç—Å—è –ø—É–±–ª–∏—á–Ω—ã–π IP-–∞–¥—Ä–µ—Å (–Ω–µ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `10.0.`)
- –î–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Å Railway –Ω—É–∂–µ–Ω –∏–º–µ–Ω–Ω–æ –ø—É–±–ª–∏—á–Ω—ã–π IP –∏–ª–∏ FQDN, –∞ –Ω–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π IP

#### –í–∞—Ä–∏–∞–Ω—Ç 2: –í–∫–ª–∞–¥–∫–∞ "–û–±–∑–æ—Ä" –∏–ª–∏ "Overview"

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **"–û–±–∑–æ—Ä"** –∏–ª–∏ **"Overview"**
2. –ù–∞–π–¥–∏—Ç–µ —Ä–∞–∑–¥–µ–ª **"–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è"** –∏–ª–∏ **"Connection parameters"**
3. –ó–¥–µ—Å—å –±—É–¥—É—Ç —É–∫–∞–∑–∞–Ω—ã –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–∞–Ω–Ω—ã–µ, –≤–∫–ª—é—á–∞—è:
   - **–ü—É–±–ª–∏—á–Ω—ã–π —Ö–æ—Å—Ç (Public Host/FQDN)** ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–æ—Ç –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è!
   - –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π IP (—Ç–æ–ª—å–∫–æ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∏–∑–Ω—É—Ç—Ä–∏ VK Cloud)

**–ì–¥–µ –∏—Å–∫–∞—Ç—å –ø—É–±–ª–∏—á–Ω—ã–π —Ö–æ—Å—Ç:**
- –í —Ä–∞–∑–¥–µ–ª–µ "–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ" ‚Üí "Master" ‚Üí "–ü—É–±–ª–∏—á–Ω—ã–π —Ö–æ—Å—Ç" –∏–ª–∏ "Public Host"
- –ò–ª–∏ –≤ —Ä–∞–∑–¥–µ–ª–µ "–û–±–∑–æ—Ä" ‚Üí "–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è" ‚Üí –Ω–∞–π–¥–∏—Ç–µ FQDN (–Ω–µ IP!)
- –û–±—ã—á–Ω–æ –≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫: `c-xxxxx.rw.mdb.cloud.vk.com` –∏–ª–∏ `c-xxxxx.rw.mdb.mcs.mail.ru`

#### –í–∞—Ä–∏–∞–Ω—Ç 3: –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –∫–ª–∞—Å—Ç–µ—Ä–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞ (–∏–∫–æ–Ω–∫–∞ —à–µ—Å—Ç–µ—Ä–µ–Ω–∫–∏ –∏–ª–∏ "Settings")
2. –ù–∞–π–¥–∏—Ç–µ —Ä–∞–∑–¥–µ–ª **"–î–æ—Å—Ç—É–ø"** –∏–ª–∏ **"Access"**
3. –ó–¥–µ—Å—å –º–æ–∂–Ω–æ —É–≤–∏–¥–µ—Ç—å:
   - –°–ø–∏—Å–æ–∫ –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö
   - –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

---

## –®–∞–≥ 2: –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–æ–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

### 2.1. –§–æ—Ä–º–∞—Ç —Å—Ç—Ä–æ–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

–°—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∏–º–µ–µ—Ç —Å–ª–µ–¥—É—é—â–∏–π —Ñ–æ—Ä–º–∞—Ç:

```
postgresql://<username>:<password>@<host>:<port>/<database>
```

### 2.2. –ì–¥–µ –≤–∑—è—Ç—å –∫–∞–∂–¥–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ

- **username**: –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ —Ä–∞–∑–¥–µ–ª–∞ "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏" (–Ω–∞–ø—Ä–∏–º–µ—Ä, `postgres` –∏–ª–∏ `mariko_user`)
- **password**: –ø–∞—Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (‚ö†Ô∏è **–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ –µ–≥–æ!**)
- **host**: 
  - **–í–∞—Ä–∏–∞–Ω—Ç 1:** –ü—É–±–ª–∏—á–Ω—ã–π IP –∏–∑ "Postgres primary connection string" –Ω–∞ –≤–∫–ª–∞–¥–∫–µ "–û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è"
    - ‚ö†Ô∏è **–í–∞–∂–Ω–æ:** –≠—Ç–æ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø—É–±–ª–∏—á–Ω—ã–π IP (–Ω–µ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `10.0.`), –∞ –Ω–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π (`10.0.0.129`)
    - –ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π IP, –≤–∫–ª—é—á–∏—Ç–µ **"–ù–∞–∑–Ω–∞—á–∏—Ç—å –≤–Ω–µ—à–Ω–∏–π IP"** –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö
  - **–í–∞—Ä–∏–∞–Ω—Ç 2:** FQDN —Ö–æ—Å—Ç–∞ –∏–∑ —Ä–∞–∑–¥–µ–ª–∞ "–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ" –¥–ª—è **Master** (–Ω–∞–ø—Ä–∏–º–µ—Ä, `c-xxxxx.rw.mdb.cloud.vk.com`)
    - Master –æ–±—ã—á–Ω–æ –∏–º–µ–µ—Ç `.rw.` (read-write) –≤ –∏–º–µ–Ω–∏ —Ö–æ—Å—Ç–∞
    - Replica –æ–±—ã—á–Ω–æ –∏–º–µ–µ—Ç `.ro.` (read-only) –≤ –∏–º–µ–Ω–∏ —Ö–æ—Å—Ç–∞
- **port**: –ø–æ—Ä—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∏–∑ "Postgres primary connection string" (–æ–±—ã—á–Ω–æ `5432`)
  - –î–ª—è SSL –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ—Ä—Ç `6432` (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω)
- **database**: –∏–º—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Ä–∞–∑–¥–µ–ª–∞ "–ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö" (–Ω–∞–ø—Ä–∏–º–µ—Ä, `mariko_db`)

**–í–∞–∂–Ω–æ:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è **Master**, –µ—Å–ª–∏ –≤—ã –Ω–µ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—Ç—å –Ω–∞–≥—Ä—É–∑–∫—É –º–µ–∂–¥—É Master –∏ Replica.

### 2.2.1. –ï—Å–ª–∏ –≤—ã –Ω–∞—à–ª–∏ Python –∫–æ–¥ (psycopg2)

–ï—Å–ª–∏ –≤—ã –≤–∏–¥–∏—Ç–µ –ø—Ä–∏–º–µ—Ä –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ Python:

```python
import psycopg2
conn = psycopg2.connect("host=10.0.0.129 dbname=<DATABASE> user=<USERNAME> password=<PASSWORD>")
```

**–≠—Ç–æ –Ω–µ —Ç–æ, —á—Ç–æ –Ω—É–∂–Ω–æ –Ω–∞–ø—Ä—è–º—É—é**, –Ω–æ –¥–∞–Ω–Ω—ã–µ –∏–∑ –Ω–µ–≥–æ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:

1. **IP –∞–¥—Ä–µ—Å `10.0.0.129`** ‚Äî —ç—Ç–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π (–ø—Ä–∏–≤–∞—Ç–Ω—ã–π) IP –∞–¥—Ä–µ—Å
   - ‚ö†Ô∏è –î–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Å Railway –∏–ª–∏ –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –Ω—É–∂–µ–Ω **–ø—É–±–ª–∏—á–Ω—ã–π —Ö–æ—Å—Ç** (FQDN)
   - –ù–∞–π–¥–∏—Ç–µ –≤ –∫–æ–Ω—Å–æ–ª–∏ VK Cloud –ø—É–±–ª–∏—á–Ω—ã–π —Ö–æ—Å—Ç (–æ–±—ã—á–Ω–æ `c-xxxxx.rw.mdb.cloud.vk.com`)

2. **–ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ —Ñ–æ—Ä–º–∞—Ç connection string:**
   - –ò–∑ Python —Ñ–æ—Ä–º–∞—Ç–∞: `host=10.0.0.129 dbname=mydb user=myuser password=mypass`
   - –í —Ñ–æ—Ä–º–∞—Ç –¥–ª—è Node.js: `postgresql://myuser:mypass@c-xxxxx.rw.mdb.cloud.vk.com:6432/mydb`
   - –ó–∞–º–µ–Ω–∏—Ç–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π IP –Ω–∞ –ø—É–±–ª–∏—á–Ω—ã–π FQDN —Ö–æ—Å—Ç–∞ –∏–∑ –∫–æ–Ω—Å–æ–ª–∏ VK Cloud

3. **–ì–¥–µ –Ω–∞–π—Ç–∏ –ø—É–±–ª–∏—á–Ω—ã–π —Ö–æ—Å—Ç:**
   - –í –∫–æ–Ω—Å–æ–ª–∏ VK Cloud –æ—Ç–∫—Ä–æ–π—Ç–µ –∫–ª–∞—Å—Ç–µ—Ä PostgreSQL
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª "–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ" –∏–ª–∏ "Connection"
   - –ù–∞–π–¥–∏—Ç–µ **–ø—É–±–ª–∏—á–Ω—ã–π —Ö–æ—Å—Ç** (Public host) –∏–ª–∏ **FQDN**
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–æ—Ç —Ö–æ—Å—Ç –≤–º–µ—Å—Ç–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ IP

### 2.3. –ü—Ä–∏–º–µ—Ä—ã —Å—Ç—Ä–æ–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

**–° –ø—É–±–ª–∏—á–Ω—ã–º IP (–∏–∑ "Postgres primary connection string"):**
```
postgresql://mariko_user:your_password@185.123.45.67:5432/mariko_db
```

**–° FQDN —Ö–æ—Å—Ç–æ–º (–∏–∑ —Ä–∞–∑–¥–µ–ª–∞ "–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ"):**
```
postgresql://mariko_user:your_password@c-xxxxx.rw.mdb.cloud.vk.com:5432/mariko_db
```

**–° SSL (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –ø–æ—Ä—Ç 6432):**
```
postgresql://mariko_user:your_password@185.123.45.67:6432/mariko_db?sslmode=require
```

### 2.4. –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

‚ö†Ô∏è **–ï—Å–ª–∏ –ø–∞—Ä–æ–ª—å —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã**, –∏—Ö –Ω—É–∂–Ω–æ –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞—Ç—å –≤ URL-—Ñ–æ—Ä–º–∞—Ç–µ:
- `@` ‚Üí `%40`
- `:` ‚Üí `%3A`
- `/` ‚Üí `%2F`
- `#` ‚Üí `%23`
- `%` ‚Üí `%25`
- `&` ‚Üí `%26`
- `?` ‚Üí `%3F`
- `=` ‚Üí `%3D`
- `+` ‚Üí `%2B`
- ` ` (–ø—Ä–æ–±–µ–ª) ‚Üí `%20`

**–ü—Ä–∏–º–µ—Ä:**
–ï—Å–ª–∏ –ø–∞—Ä–æ–ª—å `P@ssw0rd#123`, —Å—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –±—É–¥–µ—Ç:
```
postgresql://user:P%40ssw0rd%23123@host:6432/database
```

---

## –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSL –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

### 3.1. –í–∫–ª—é—á–µ–Ω–∏–µ SSL –≤ VK Cloud

–î–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–∫–ª—é—á–∏—Ç—å TLS-—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ:

1. –í –∫–∞—Ä—Ç–æ—á–∫–µ –∏–Ω—Å—Ç–∞–Ω—Å–∞ PostgreSQL –ø–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **"–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö"** ‚Üí **"–î–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä"**
2. –í—ã–±–µ—Ä–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä **`ssl`** –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ **`on`**
3. –ù–∞–∂–º–∏—Ç–µ **"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"**
4. –ü–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–Ω—Å—Ç–∞–Ω—Å –±—É–¥–µ—Ç –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–µ–Ω

–ü–æ—Å–ª–µ –≤–∫–ª—é—á–µ–Ω–∏—è SSL –≤—Å–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î –¥–æ–ª–∂–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–∂–∏–º `sslmode=require`.

### 3.2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSL –≤ –∫–æ–¥–µ

–í –∫–æ–¥–µ —ç—Ç–æ —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ:

```javascript
ssl: process.env.NODE_ENV === "production" ? { rejectUnauthorized: false } : false
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- –î–ª—è production –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ SSL (`sslmode=require`)
- –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ—Ä—Ç `5432` —Å SSL –∏–ª–∏ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –ø–æ—Ä—Ç `6432` (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω)
- –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –º–æ–∂–Ω–æ –≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å SSL, –Ω–æ –¥–ª—è production —ç—Ç–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ

---

## –®–∞–≥ 4: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –ø–æ IP

### 4.1. –ì–¥–µ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –¥–æ—Å—Ç—É–ø

1. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–ª–∞—Å—Ç–µ—Ä PostgreSQL –≤ –∫–æ–Ω—Å–æ–ª–∏ VK Cloud
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª **"–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å"** –∏–ª–∏ **"Security"**
3. –ù–∞–π–¥–∏—Ç–µ —Ä–∞–∑–¥–µ–ª **"–î–æ—Å—Ç—É–ø –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞"** –∏–ª–∏ **"Public access"**
4. –ù–∞–π–¥–∏—Ç–µ —Ä–∞–∑–¥–µ–ª **"–†–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ IP-–∞–¥—Ä–µ—Å–∞"** –∏–ª–∏ **"Allowed IP addresses"**

### 4.2. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ IP-–∞–¥—Ä–µ—Å–æ–≤

–î–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Å Railway –∏–ª–∏ –¥—Ä—É–≥–∏—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤:

1. **–ï—Å–ª–∏ Railway –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ IP:**
   - –î–æ–±–∞–≤—å—Ç–µ IP-–∞–¥—Ä–µ—Å–∞ Railway –≤ —Å–ø–∏—Å–æ–∫ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö

2. **–ï—Å–ª–∏ IP –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ:**
   - –ú–æ–∂–Ω–æ –≤—Ä–µ–º–µ–Ω–Ω–æ —Ä–∞–∑—Ä–µ—à–∏—Ç—å –¥–æ—Å—Ç—É–ø —Å–æ –≤—Å–µ—Ö IP (`0.0.0.0/0`) –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
   - ‚ö†Ô∏è **–ù–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è production!** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ VPN –∏–ª–∏ –ø—Ä–∏–≤–∞—Ç–Ω—É—é —Å–µ—Ç—å

3. **–î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:**
   - –î–æ–±–∞–≤—å—Ç–µ –≤–∞—à —Ç–µ–∫—É—â–∏–π IP-–∞–¥—Ä–µ—Å
   - –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `0.0.0.0/0` –≤—Ä–µ–º–µ–Ω–Ω–æ (–Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ!)

### 4.3. –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç: –ü—Ä–∏–≤–∞—Ç–Ω–∞—è —Å–µ—Ç—å

–î–ª—è –±–æ–ª—å—à–µ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –¥–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ –ø—Ä–∏–≤–∞—Ç–Ω—É—é —Å–µ—Ç—å VK Cloud:
1. –°–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é –º–∞—à–∏–Ω—É –≤ —Ç–æ–π –∂–µ —Å–µ—Ç–∏
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ VPN –∏–ª–∏ –ø—Ä–æ–∫—Å–∏
3. –ü–æ–¥–∫–ª—é—á–∞–π—Ç–µ—Å—å –∫ –ë–î —á–µ—Ä–µ–∑ –ø—Ä–∏–≤–∞—Ç–Ω—É—é —Å–µ—Ç—å

---

## –®–∞–≥ 5: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

### 5.1. –õ–æ–∫–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)

–°–æ–∑–¥–∞–π—Ç–µ –∏–ª–∏ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª `backend/server/.env.local`:

```bash
# PostgreSQL (VK Cloud)
DATABASE_URL=postgresql://mariko_user:your_password@c-xxxxx.rw.mdb.cloud.vk.com:6432/mariko_db

# –û—Å—Ç–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ...
CART_SERVER_PORT=4010
CART_ORDERS_TABLE=cart_orders
ADMIN_TELEGRAM_IDS=577222108
# ... –∏ —Ç.–¥.
```

**–í–∞–∂–Ω–æ:**
- ‚ö†Ô∏è –ù–µ –∫–æ–º–º–∏—Ç—å—Ç–µ —Ñ–∞–π–ª `.env.local` –≤ Git (–æ–Ω –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ `.gitignore`)
- ‚ö†Ô∏è –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `.env.local` –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- ‚ö†Ô∏è –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Railway Variables –¥–ª—è production

### 5.2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –Ω–∞ Railway (–¥–ª—è production)

#### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ Railway CLI (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Railway CLI (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
npm i -g @railway/cli

# –í–æ–π–¥–∏—Ç–µ –≤ Railway
railway login

# –°–≤—è–∂–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç
railway link

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é DATABASE_URL –¥–ª—è backend —Å–µ—Ä–≤–∏—Å–∞
railway variables set DATABASE_URL="postgresql://mariko_user:your_password@c-xxxxx.rw.mdb.cloud.vk.com:6432/mariko_db" --service backend
```

**–í–∞–∂–Ω–æ:** –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∑–∞–∫–ª—é—á–∏—Ç–µ —Å—Ç—Ä–æ–∫—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –≤ –∫–∞–≤—ã—á–∫–∏, –æ—Å–æ–±–µ–Ω–Ω–æ –µ—Å–ª–∏ –≤ –ø–∞—Ä–æ–ª–µ –µ—Å—Ç—å —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã!

#### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å Railway

1. –û—Ç–∫—Ä–æ–π—Ç–µ [Railway Dashboard](https://railway.app)
2. –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç ‚Üí —Å–µ—Ä–≤–∏—Å `backend`
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Variables**
4. –ù–∞–π–¥–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `DATABASE_URL` (–µ—Å–ª–∏ –æ–Ω–∞ –±—ã–ª–∞ —Å–æ–∑–¥–∞–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ Railway PostgreSQL)
5. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –Ω–µ—ë –∏ –∑–∞–º–µ–Ω–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–∞ —Å—Ç—Ä–æ–∫—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ VK Cloud PostgreSQL
6. –ò–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `DATABASE_URL` —Å –Ω–æ–≤—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º

#### –í–∞—Ä–∏–∞–Ω—Ç 3: –ß–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç setup-railway-env.sh

1. –û–±–Ω–æ–≤–∏—Ç–µ —Ñ–∞–π–ª `backend/server/.env` –∏–ª–∏ `.env.local` —Å –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–æ–π –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:
   ```bash
   DATABASE_URL=postgresql://mariko_user:your_password@c-xxxxx.rw.mdb.cloud.vk.com:6432/mariko_db
   ```

2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç:
   ```bash
   bash scripts/setup-railway-env.sh
   ```

   –°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ—á–∏—Ç–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ `.env` —Ñ–∞–π–ª–∞ –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç –µ–≥–æ –Ω–∞ Railway.

---

## –®–∞–≥ 6: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

### 6.1. –õ–æ–∫–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ backend —Å–µ—Ä–≤–µ—Ä –ª–æ–∫–∞–ª—å–Ω–æ:
   ```bash
   cd backend/server
   npm run dev
   ```

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ - –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—à–∏–±–æ–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î:
   ```
   ‚úÖ Database connection established
   ‚úÖ Database initialized
   ```

3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –ø—Ä–æ—Å—Ç–æ–π –∑–∞–ø—Ä–æ—Å —á–µ—Ä–µ–∑ API:
   ```bash
   curl http://localhost:4010/api/cart/orders
   ```

### 6.2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ Railway

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Railway:
   ```bash
   railway logs --service backend
   ```

2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –Ω–µ—Ç –æ—à–∏–±–æ–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:
   ```
   ‚úÖ Database connection established
   ```

3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É API:
   ```bash
   curl https://your-backend.up.railway.app/api/cart/orders
   ```

### 6.3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ VK Cloud Console

1. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–ª–∞—Å—Ç–µ—Ä PostgreSQL –≤ –∫–æ–Ω—Å–æ–ª–∏ VK Cloud
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **"–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥"** –∏–ª–∏ **"Monitoring"**
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –º–µ—Ç—Ä–∏–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π –∏ –∑–∞–ø—Ä–æ—Å–æ–≤
4. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–∏–¥–Ω—ã –∞–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

---

## –®–∞–≥ 7: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### 7.1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ç–∞–±–ª–∏—Ü—ã –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ (—á–µ—Ä–µ–∑ `databaseInit.mjs`).

### 7.2. –†—É—á–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –≤—Ä—É—á–Ω—É—é:

```bash
cd backend/server
node databaseInit.mjs
```

---

## Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: "Connection refused" –∏–ª–∏ "Connection timeout"

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø—É–±–ª–∏—á–Ω—ã–π –¥–æ—Å—Ç—É–ø –≤–∫–ª—é—á–µ–Ω –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –∫–ª–∞—Å—Ç–µ—Ä–∞ VK Cloud
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å —Å—Ç—Ä–æ–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (host, port, username, password)
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ IP-–∞–¥—Ä–µ—Å Railway –Ω–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∫–ª–∞—Å—Ç–µ—Ä –∑–∞–ø—É—â–µ–Ω –∏ –¥–æ—Å—Ç—É–ø–µ–Ω
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ñ–∞–π—Ä–≤–æ–ª–∞ VK Cloud

### –ü—Ä–æ–±–ª–µ–º–∞: "SSL connection required"

**–†–µ—à–µ–Ω–∏–µ:**
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –ø–æ—Ä—Ç `6432` (SSL) –≤–º–µ—Å—Ç–æ `5432`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤ –∫–æ–¥–µ –≤–∫–ª—é—á–µ–Ω SSL –¥–ª—è production:
   ```javascript
   ssl: process.env.NODE_ENV === "production" ? { rejectUnauthorized: false } : false
   ```

### –ü—Ä–æ–±–ª–µ–º–∞: "Authentication failed"

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å username –∏ password
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–∞—Ä–æ–ª—å –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –≤ URL
3. –ï—Å–ª–∏ –ø–∞—Ä–æ–ª—å —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã, –∑–∞–∫–æ–¥–∏—Ä—É–π—Ç–µ –∏—Ö –≤ URL-—Ñ–æ—Ä–º–∞—Ç–µ (—Å–º. –®–∞–≥ 2.4)
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

### –ü—Ä–æ–±–ª–µ–º–∞: "Database does not exist"

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –∏–º–µ–Ω–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –≤ —Å—Ç—Ä–æ–∫–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ–∑–¥–∞–Ω–∞ –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
4. –í –∫–æ–Ω—Å–æ–ª–∏ VK Cloud –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–ø–∏—Å–æ–∫ –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ

### –ü—Ä–æ–±–ª–µ–º–∞: –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è DATABASE_URL –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –Ω–∞ Railway

**–†–µ—à–µ–Ω–∏–µ:**
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã —É–∫–∞–∑–∞–ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å: `--service backend`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞: `railway variables --service backend`
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π:
   ```bash
   railway restart --service backend
   ```

### –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ –º–æ–≥—É –Ω–∞–π—Ç–∏ –ø—É–±–ª–∏—á–Ω—ã–π —Ö–æ—Å—Ç –≤ –∫–æ–Ω—Å–æ–ª–∏

**–°–∏–º–ø—Ç–æ–º—ã:**
- –í–∏–∂—É —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π IP (`10.0.0.129`) –≤ "Postgres primary connection string"
- –ù–µ –≤–∏–∂—É –ø—É–±–ª–∏—á–Ω—ã–π IP –∏–ª–∏ FQDN —Ö–æ—Å—Ç
- –ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ `/users` –∏–ª–∏ `/databases` –Ω–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

**–†–µ—à–µ–Ω–∏–µ:**

1. **–ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –º–µ—Å—Ç–æ –¥–ª—è –ø–æ–∏—Å–∫–∞:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É –∫–ª–∞—Å—Ç–µ—Ä–∞ (—É–±–µ—Ä–∏—Ç–µ `/users` –∏–ª–∏ `/databases` –∏–∑ URL)
   - URL –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å: `https://msk.cloud.vk.com/app/.../databases/7c5748d0-...`
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **"–û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è"** –∏–ª–∏ **"Overview"**
   - –ù–∞–π–¥–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä **"Postgres primary connection string"**
   - –ï—Å–ª–∏ —Ç–∞–º —É–∫–∞–∑–∞–Ω IP –≤–∏–¥–∞ `10.0.0.129`, –Ω—É–∂–Ω–æ –≤–∫–ª—é—á–∏—Ç—å –≤–Ω–µ—à–Ω–∏–π IP

2. **–í–∫–ª—é—á–∏—Ç–µ "–ù–∞–∑–Ω–∞—á–∏—Ç—å –≤–Ω–µ—à–Ω–∏–π IP":**
   - –û—Ç–∫—Ä–æ–π—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞ (–∏–∫–æ–Ω–∫–∞ —à–µ—Å—Ç–µ—Ä–µ–Ω–∫–∏ –∏–ª–∏ "Settings")
   - –ù–∞–π–¥–∏—Ç–µ —Ä–∞–∑–¥–µ–ª **"–î–æ—Å—Ç—É–ø"** –∏–ª–∏ **"Access"**
   - –í–∫–ª—é—á–∏—Ç–µ –æ–ø—Ü–∏—é **"–ù–∞–∑–Ω–∞—á–∏—Ç—å –≤–Ω–µ—à–Ω–∏–π IP"** –∏–ª–∏ **"Assign external IP"**
   - –ü–æ—Å–ª–µ –≤–∫–ª—é—á–µ–Ω–∏—è –≤ "Postgres primary connection string" –ø–æ—è–≤–∏—Ç—Å—è –ø—É–±–ª–∏—á–Ω—ã–π IP (–Ω–µ `10.0.0.129`)

3. **–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–± - –Ω–∞–π—Ç–∏ FQDN:**
   - –ù–∞–π–¥–∏—Ç–µ –≤–∫–ª–∞–¥–∫—É **"–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ"** –∏–ª–∏ **"Connection"** (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–∞)
   - –¢–∞–º –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É–∫–∞–∑–∞–Ω –ø—É–±–ª–∏—á–Ω—ã–π FQDN —Ö–æ—Å—Ç
   - –û–±—ã—á–Ω–æ –≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫: `c-xxxxx.rw.mdb.cloud.vk.com`

4. **–ö–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç –ø—É–±–ª–∏—á–Ω—ã–π —Ö–æ—Å—Ç/IP:**
   - **–ü—É–±–ª–∏—á–Ω—ã–π IP:** –Ω–µ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `10.0.` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `185.123.45.67`)
   - **FQDN —Ö–æ—Å—Ç:** –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `c-` –∏ —Å–æ–¥–µ—Ä–∂–∏—Ç `.rw.mdb.cloud.vk.com` –∏–ª–∏ `.rw.mdb.mcs.mail.ru`
   - –≠—Ç–æ –ù–ï `msk.cloud.vk.com` (—ç—Ç–æ –¥–æ–º–µ–Ω –∫–æ–Ω—Å–æ–ª–∏, –∞ –Ω–µ —Ö–æ—Å—Ç –ë–î)
   - –≠—Ç–æ –ù–ï –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π IP `10.0.0.129`

### –ü—Ä–æ–±–ª–µ–º–∞: "Host not found" –∏–ª–∏ "DNS resolution failed"

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å FQDN —Ö–æ—Å—Ç–∞ (–¥–æ–ª–∂–µ–Ω –∑–∞–∫–∞–Ω—á–∏–≤–∞—Ç—å—Å—è –Ω–∞ `.cloud.vk.com` –∏–ª–∏ `.mcs.mail.ru`)
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –Ω–µ—Ç –æ–ø–µ—á–∞—Ç–æ–∫ –≤ –∏–º–µ–Ω–∏ —Ö–æ—Å—Ç–∞
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—å `ping` –∏–ª–∏ `nslookup` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Ö–æ—Å—Ç–∞

### –ü—Ä–æ–±–ª–µ–º–∞: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π IP –≤–º–µ—Å—Ç–æ –ø—É–±–ª–∏—á–Ω–æ–≥–æ —Ö–æ—Å—Ç–∞

**–°–∏–º–ø—Ç–æ–º—ã:**
- –í–∏–¥–∏—Ç–µ IP –∞–¥—Ä–µ—Å —Ç–∏–ø–∞ `10.0.0.129` –≤ "Postgres primary connection string"
- –ù–µ –º–æ–∂–µ—Ç–µ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è —Å Railway –∏–ª–∏ –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
- –û—à–∏–±–∫–∞ "Connection refused" –∏–ª–∏ "Connection timeout"

**–†–µ—à–µ–Ω–∏–µ:**
1. **–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π IP (`10.0.0.129`)** —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ –ø—Ä–∏–≤–∞—Ç–Ω–æ–π —Å–µ—Ç–∏ VK Cloud
   - –û–Ω —É–∫–∞–∑–∞–Ω –≤ "Postgres primary connection string" –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π
   - –î–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –∏–ª–∏ —Å Railway –æ–Ω –Ω–µ –ø–æ–¥–æ–π–¥–µ—Ç

2. **–í–∫–ª—é—á–∏—Ç–µ "–ù–∞–∑–Ω–∞—á–∏—Ç—å –≤–Ω–µ—à–Ω–∏–π IP":**
   - –û—Ç–∫—Ä–æ–π—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞ PostgreSQL
   - –ù–∞–π–¥–∏—Ç–µ —Ä–∞–∑–¥–µ–ª **"–î–æ—Å—Ç—É–ø"** –∏–ª–∏ **"Access"**
   - –í–∫–ª—é—á–∏—Ç–µ –æ–ø—Ü–∏—é **"–ù–∞–∑–Ω–∞—á–∏—Ç—å –≤–Ω–µ—à–Ω–∏–π IP"** –∏–ª–∏ **"Assign external IP"**
   - –ü–æ—Å–ª–µ –≤–∫–ª—é—á–µ–Ω–∏—è –≤ "Postgres primary connection string" –ø–æ—è–≤–∏—Ç—Å—è –ø—É–±–ª–∏—á–Ω—ã–π IP (–Ω–µ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `10.0.`)

3. **–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ, –Ω–∞–π–¥–∏—Ç–µ –ø—É–±–ª–∏—á–Ω—ã–π FQDN —Ö–æ—Å—Ç:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ –∫–ª–∞—Å—Ç–µ—Ä PostgreSQL –≤ –∫–æ–Ω—Å–æ–ª–∏ VK Cloud
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤–æ –≤–∫–ª–∞–¥–∫—É **"–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ"** –∏–ª–∏ **"Connection"**
   - –ù–∞–π–¥–∏—Ç–µ —Ä–∞–∑–¥–µ–ª **"Master"** ‚Üí **"–ü—É–±–ª–∏—á–Ω—ã–π —Ö–æ—Å—Ç"** –∏–ª–∏ **"Public Host"**
   - –û–±—ã—á–Ω–æ –≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫: `c-xxxxx.rw.mdb.cloud.vk.com` –∏–ª–∏ `c-xxxxx.rw.mdb.mcs.mail.ru`

4. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—É–±–ª–∏—á–Ω—ã–π IP –∏–ª–∏ FQDN –≤ —Å—Ç—Ä–æ–∫–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:**
   ```
   postgresql://username:password@185.123.45.67:5432/database
   ```
   –ò–ª–∏ —Å FQDN:
   ```
   postgresql://username:password@c-xxxxx.rw.mdb.cloud.vk.com:5432/database
   ```
   –í–º–µ—Å—Ç–æ:
   ```
   postgresql://username:password@10.0.0.129:5432/database  ‚ùå –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞!
   ```

---

## –ß–µ–∫–ª–∏—Å—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

- [ ] –ö–ª–∞—Å—Ç–µ—Ä PostgreSQL —Å–æ–∑–¥–∞–Ω –≤ VK Cloud
- [ ] –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ–∑–¥–∞–Ω–∞ –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ
- [ ] –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞–Ω –∏ –∏–º–µ–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø—Ä–∞–≤–∞
- [ ] –î–∞–Ω–Ω—ã–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –ø–æ–ª—É—á–µ–Ω—ã –∏–∑ –∫–æ–Ω—Å–æ–ª–∏ VK Cloud:
  - [ ] Host (—Ö–æ—Å—Ç)
  - [ ] Port (–ø–æ—Ä—Ç)
  - [ ] Database (–∏–º—è –ë–î)
  - [ ] Username (–∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
  - [ ] Password (–ø–∞—Ä–æ–ª—å)
- [ ] –°—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∞ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞
- [ ] –î–æ—Å—Ç—É–ø –ø–æ IP –Ω–∞—Å—Ç—Ä–æ–µ–Ω (–µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è)
- [ ] –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è `DATABASE_URL` –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ (`.env.local`)
- [ ] –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è `DATABASE_URL` –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –Ω–∞ Railway –¥–ª—è backend —Å–µ—Ä–≤–∏—Å–∞
- [ ] –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è `DATABASE_URL` –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –Ω–∞ Railway –¥–ª—è bot —Å–µ—Ä–≤–∏—Å–∞ (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
- [ ] –õ–æ–∫–∞–ª—å–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç (–Ω–µ—Ç –æ—à–∏–±–æ–∫ –≤ –ª–æ–≥–∞—Ö)
- [ ] Railway –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç (–Ω–µ—Ç –æ—à–∏–±–æ–∫ –≤ –ª–æ–≥–∞—Ö)
- [ ] –î–∞–Ω–Ω—ã–µ –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã (–µ—Å–ª–∏ –±—ã–ª–∏ –≤ —Å—Ç–∞—Ä–æ–π –ë–î)
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ VK Cloud

---

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [–û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è VK Cloud](https://mcs.mail.ru/docs/)
- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ PostgreSQL –≤ VK Cloud](https://mcs.mail.ru/docs/ru/dbs/dbaas/postgresql/)
- [–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL](https://mcs.mail.ru/docs/ru/dbs/dbaas/postgresql/connect/)

---

## –ì–æ—Ç–æ–≤–æ! üéâ

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤ —É –≤–∞—Å –±—É–¥–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö PostgreSQL –æ—Ç VK Cloud.

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–Ω—É—Ç –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑–¥–µ–ª Troubleshooting –∏–ª–∏ –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ VK Cloud.
